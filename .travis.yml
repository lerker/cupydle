sudo: True

language: python

python:
  - "3.3"

before_install:
- sudo apt-get update
- sudo apt-get install wget
- sudo apt-get install build-essential
- sudo apt-get install python3-numpy
- sudo apt-get install python3-scipy
- sudo apt-get install python3-dev
#- sudo apt-get install python3-pip
- sudo apt-get install python3-nose
#- sudo apt-get install python3-matplotlib
- sudo apt-get install libopenblas-dev
- sudo apt-get install linux-headers-`uname -r`
- sudo apt-get install git
- sudo apt-get install g++-4.6
- sudo apt-get install gcc-4.6
- sudo pip install Theano


notifications:
  email:
    on_success: always
    on_failure: never

install:
  - sudo pip install -r requirements.txt
  - pip install coveralls
  - python setup.py install

before_script:
  - wget http://developer.download.nvidia.com/compute/cuda/6_0/rel/installers/cuda_6.0.37_linux_64.run
  - chmod a+x cuda_6.0.37_linux_64.run
  - ./cuda_6.0.37_linux_64.run --silent --driver --override
  - ./cuda_6.0.37_linux_64.run --silent --toolkit --override
  - ./cuda_6.0.37_linux_64.run --silent --samples --samplespath=/home/ --override
  #- rm cuda_6.0.37_linux_64.run && \
  #- ln -s cuda-6.0 /usr/local/cuda && \
  #- rm -rf /var/lib/apt/lists/*
  - export PATH=/usr/local/cuda/bin:${PATH}
  - export LD_LIBRARY_PATH=/usr/local/cuda/lib64:${LD_LIBRARY_PATH}
  - export PYTHONPATH=/root/cupydle/:${PYTHONPATH}

script:
  #- chmod a+x run.sh
  #- "./run.sh"
  - nosetests -v cupydle/dnn/dbn_gpu2.py -mrd

#after_success:
#  - coveralls






